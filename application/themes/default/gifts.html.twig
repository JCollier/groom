{% block content %}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
   <title>My Items</title>
    <script src="{{ js_path['global'] }}"></script>
    <script src="{{ js_path['jquery'] }}"></script>
    <link rel="stylesheet" type="text/css" href="{{ css_path['global'] }}">
    <link rel="stylesheet" type="text/css" href="{{ css_path['bootstrap'] }}">
    <link rel="stylesheet" type="text/css" href="{{ css_path['bootstrap_theme'] }}">
    <script>
        function getUserItems( p, n, s ) {
            console.log( 'loaded!' );

            if( p == "" ) {
                document.getElementById( "txtHint" ).innerHTML = "";
                return;
            }

            if( window.XMLHttpRequest ) { // code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            } 
            else { // code for IE6, IE5
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }

            var href = "../groom/ajax/get_user_items?p=" + p + 
                                                   "&n=" + n + 
                                                   "&s=" + s;

            xmlhttp.open( "GET", href, true ) ;
            xmlhttp.send();  

            xmlhttp.onreadystatechange = function() {
                if( xmlhttp.readyState == 4 && xmlhttp.status == 200 ) {
                    $("#users-block").load( href );
                    $("#items-block-constraint").removeClass( 'div-block-height-default' );                    
                }
            }

          
        }

        var total_default   = {{ per_page }};
        var total           = total_default;

        window.onload = getUserItems( 1, total, 'value' );
        window.onload = setCurrentItemBtn( 1 );
        window.onload = jumpToItemsBlock();

        function jumpToItemsBlock() {
            var block_current = document.getElementById( "navbar-users" );

            if( block_current ) {
                //$( "html, body" ).animate( { scrollTop: $( block_current ).offset().bottom }, 80 );
                // $( "html, body" ).animate( { scrollTop: 100 }, 80 );
            }
        }

        function setCurrentItemBtn( num ) {
            var id = 'item-' + num;

            $(document).ready(function() {
                elem_old_num = document.getElementById( 'item-old' );

                if( elem_old_num ) {
                    var old_id = 'item-' + elem_old_num.innerHTML;
                    elem_old_num.innerHTML = num;

                    elem_old = document.getElementById( old_id );

                    console.log( elem_old );

                    
                }

                if( elem_old ) {
                    $(elem_old).removeClass( 'btn-nav-pagination-disabled' );
                    document.getElementById( old_id ).style.opacity="0.9";
                    $(elem_old).removeAttr("disabled", "disabled");
                    $(elem_old).on('click');
                }

                var elem_current = document.getElementById( id );

                if( elem_current ) {
                    elem_current.style.opacity="0.9";

                    $(elem_current).addClass( 'btn-nav-pagination-disabled' );
                    $(elem_current).attr("disabled", "disabled").off('click');
                }
            });
        }
    </script>
 </head>
 <body style="margin:0; padding:0; width:100%; height:100%; padding-bottom:20px; background-color:#f9fef9; overflow-x:hidden;">
        <div style="float:left; clear:both; box-shadow: 0 0 6px rgba(0, 0, 0, 0.3); left:0;position:fixed; top:0; width: 100%; z-index: 1000;" id="navbar-users" class="navbar navbar-blend-top height-header width-full pos-float-left bg-success" role="navigation">
            <div class="col-xs-9" style="float:right; height:100%;">
                <div style="height:100%;  padding-top:0px;">
                    {% for link in links_header %}
                        <!-- <div class="pos-float-left" style="background-color:#c4dad4; margin-right:2px; border-top: 1px solid black; border-right: 1px solid black; border-left:1px solid black; width:120px; height:100%; position:relative;"> -->
                        <div class="pos-float-left header-link-div" style=" width:120px; height:100%; position:relative;">
                            <a href="{{ link['url'] }}" class="pos-float-left header-link" style="height:100%;"><div align="center" style="height:100%; padding-top:6px; position:absolute; bottom:0; width:100%;">{{ link['label']}}</div></a>
                        </div>
                    {% endfor %}
                </div>  
            </div>
        </div>

        <div id="container-home" class="bg-color-gray width-full pos-float-left" style="display:none;">
            <h2>Userid: {{ userid }}</h2>
            <h2>Username: {{ username }}</h2>
        </div>

        <div class="col-xs-12" style="padding-bottom:20px; float:left; clear:both;">
            <div class="col-xs-2"></div>
            <div class="col-xs-8">
                Ads and/or information can go here...
            </div>
        </div>    

        <div class="col-xs-12" id="items-user-controls" style="height:60px; position:absolute; top:80px;">
            <div class="col-xs-2"></div>
            <div class="col-xs-8">
                Some user controls will go here
            </div>
        </div>    

        <div id="big-block-container" style="min-height:760px;">
            <div class="col-xs-11" id="items-block-container" style="padding-left:5%;">
                <div class="col-xs-10 bg-color-white div-block div-block-height-default" id="items-block-constraint" style="padding:30px; padding-left:35px; padding-bottom:20px; padding-top:30px; margin-top:30px;">
                    <!-- <div id="users-block"><div></div></div> -->

                <div id="users-block">
                    <div style="display:block; width:100%;" id="users-block">
                        <center>
                            <!-- This is to render placeholder elements while the page loads... -->
                            {% if page_count > 1 %}
                                {% set counter = 8 %}
                            {% else %}
                                {% set counter = 4 %}
                            {% endif %}

                            {% for i in 1..counter %}
                            <div style="width:234px; margin:0px; margin-top:20px; position: relative; padding-bottom:4px; min-height:100%; height:264px; vertical-align:baseline; display:block; float:left; margin:0px;  margin-bottom:12px; overflow:hidden; padding-right:20%; margin-left:2%;" id="gifts-item-div-{{ i }}" class="gifts-item-div">
                                <a class="gifts-item" href="#">
                                    <div style="z-index:2; position:absolute; top:0; left:0; background-color(1, 1, 1, 0.2); height: 202px; width:234px; padding-top:0px; padding-bottom:8px; padding-left:0px; padding-right:0px; border:1px solid rgba(1, 1, 1, 0.2); box-shadow: 2px 1px 1px 0px rgba(1, 1, 1, 0.2);" id="gifts-item-subdiv-{{ i }}" class="border-radius-m gifts-item-subdiv-bg">
                                    </div>
                                    <div style="z-index:1; position:absolute; top:0; left:0; height: 100%; width:234px; padding-top:0px; padding-bottom:8px; padding-left:0px; padding-right:0px; border:1px solid rgba(1, 1, 1, 0.2); box-shadow: 2px 1px 1px 0px rgba(1, 1, 1, 0.2);" id="gifts-item-subdiv-{{ i }}" class="border-radius-m gifts-item-subdiv">
                                        <center><div><img width="232px" height="200px" src="http://192.168.220.133/groom/htdocs/images_1/default/placeholder_item.jpg" style="display:block; margin:auto;" id="gifts-item-img-3" class="img-rounded-top gifts-item-img n-3"></div></center>
                                        <div style="display:block; margin:auto; padding-left:4px; padding-right:4px; border-top:1px solid rgba(1, 1, 1, 0.4); width:100%;">
                                            <div><b></b></div>
                                            <div style="font-size:12px; font-weight:400; margin-left:8px; margin-right:8px;"></div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            {% endfor %}
                        </center>
                    </div>
                </div>
            </div>

            </div>

            <div style="margin-right:-30px;">
                <div class="col-xs-1 bg-color-white div-block-left" id="admin-nav-users-toolbar" style=" height:336px; overflow:hidden; margin-top:30px;">
                    <div id="users-nav-side"><div><b>Toolbar here</b></div></div>
                </div>
            </div>
        </div>

        {% set n = page_count %}
        {% if n > 1 %}
            <div class="col-xs-10" id="admin-nav-users-pagination" style="padding-top:8px;">
                <center>
                    <div style="width:80%;">
                        <div>
                            {% for i in 1..n %}
                                <div id="item-{{i}}" 
                                     style="opacity:0.9; margin-right:6px;" 
                                     class="btn btn-default btn-nav-pagination start xlarge" 
                                     onclick="getUserItems( {{ i }}, {{ per_page }}, 'value' ); setCurrentItemBtn( {{ i }} );">{{ i }}</div>
                            {% endfor %}
                        </div>
                    </div>
                </center>
                <div style="height:8px; width:100%; float:left;"></div>
            </div>
        {% else %}
            <div class="col-xs-10" id="admin-nav-users-pagination" style="padding-top:8px;">
                <center><div style="width:80%;"></div></center>
                <div style="height:8px; width:100%; float:left;"></div>
            </div>
        {% endif %}
        
        <div id="item-old" style="display:none; margin-bottom:12px;">1</div>

        <div class="div-footer width-full pos-float-left bg-info">
            <div id="header_links" class="pos-float-right">
                Footer Links:
                {% for link in links_footer %}
                    <a href="{{ link['url'] }}">{{ link['label']}}</a>
                {% endfor %}
            </div>
        </div>
</body>
</html>

{% endblock %}
